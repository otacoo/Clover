# Adding a New Theme to Clover

A theme in Clover is simply a set of colour definitions used by the UI. You can
add themes without writing any Java – most work is editing an XML styles file
and registering the new theme in the code.

## Prerequisites

1. Android Studio installed and the project opened (see [BUILD.md](BUILD.md)).
2. Familiarity with resource editing in Android helps but is not required.

## 1. Define your theme

Start by editing the existing stylesheet at `app/src/main/res/values/styles.xml`.

Each theme is a `<style>` block that extends one of the base styles:

* `Chan.Theme` – the default light theme
* `Chan.Theme.Dark` – a dark variant

You may also see a `Chan.Theme.Black` or other specialised themes that inherit
from `Chan.Theme.Dark`.

Copy an existing block, give it a new name, and override only the values you
want to change. For example:

```xml
<style name="Chan.Theme.MyCustom" parent="Chan.Theme">
    <item name="backcolor">#ffe0e0e0</item>
    <item name="text_color_primary">#ff003300</item>
</style>
```

The resource names correspond to UI elements (background colour, post quote
colour, divider colour, etc.). You can search the file for `post_quote_color`
or `divider_color` to see the full list. Values not explicitly overridden will
be inherited from the parent theme.

## 2. Getting colors and primary colors

To get a color picker in Android Studio for the the `styles.xml` file, click the little, colored square icons on the left side of the code editor.

The list of available primary colours is defined in `ThemeHelper.PrimaryColor`.
Each constant has a human name and an internal key (e.g. `GREEN`, `BLUE`).

These keys are used when registering a theme as the fourth argument, and also
appear in the theme preview UI. Pick one that best matches your theme’s
primary hue – the toolbar and a few other accents will use that colour.

## 2. Register the theme in code

The theme list shown in the settings screen is built by `ThemeHelper`.\
Open `app/src/main/java/org/otacoo/chan/ui/theme/ThemeHelper.java` and locate the
`ThemeHelper()` constructor where `themes.add(...)` calls are made:

```java
public ThemeHelper() {
    themes.add(new Theme("Auto (System)", "auto", R.style.Chan_Theme, PrimaryColor.BLUE));
    themes.add(new Theme("Light", "light", R.style.Chan_Theme, PrimaryColor.BLUE));
    themes.add(new DarkTheme("Dark", "dark", R.style.Chan_Theme_Dark, PrimaryColor.DARK));
    // ... other themes
}
```

Add a new entry for your theme.\
Use `Theme` for light-based schemes and
`DarkTheme` for dark ones.

Arguments:

1. **Display name** – shown to users in the settings dialog.
2. **Internal key** – stored in preferences; use only lowercase letters and
   underscores (no spaces).
3. **Style resource** – the value generated by Android from `styles.xml`, e.g.
   `R.style.Chan_Theme_MyCustom`.
4. **Primary colour** – a value from `PrimaryColor` that approximates the
   theme's toolbar colour. This affects a few system UI accents.

Example:

```java
themes.add(new Theme("My Custom", "my_custom", R.style.Chan_Theme_MyCustom, PrimaryColor.GREEN));
```

## 3. Build and test

Compile and run the app (Build → Make Project). Open the settings screen
(**Settings → Appearance**) and select your new theme from the dropdown.\
It
should apply immediately; if not, check the logcat output for errors (typo in
style name, etc.).

## 4. Submit your theme

When you’re happy with the result, commit your `styles.xml` changes and the code
registration in `ThemeHelper.java` line to a branch and submit a pull request.

That’s all!